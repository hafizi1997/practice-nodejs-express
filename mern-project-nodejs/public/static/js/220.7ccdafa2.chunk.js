"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220],{347:(e,t,n)=>{n.d(t,{A:()=>s});n(43);var r=n(582),a=n(579);const s=e=>e.href?(0,a.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?(0,a.jsx)(r.N_,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):(0,a.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})},356:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(43),a=n(347),s=n(579);const i=e=>{const[t,n]=(0,r.useState)(),[i,o]=(0,r.useState)(),[l,c]=(0,r.useState)(!1),u=(0,r.useRef)();(0,r.useEffect)((()=>{if(!t)return;const e=new FileReader;e.onload=()=>{o(e.result)},e.readAsDataURL(t)}),[t]);return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{id:e.id,ref:u,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:t=>{let r,a=l;t.target.files&&1===t.target.files.length?(r=t.target.files[0],n(r),c(!0),a=!0):(c(!1),a=!1),e.onInput(e.id,r,a)}}),(0,s.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[i&&(0,s.jsx)("img",{src:i,alt:"Preview"}),!i&&(0,s.jsx)("p",{children:"Please pick an image."})]}),(0,s.jsx)(a.A,{type:"button",onClick:()=>{u.current.click()},children:"PICK IMAGE"})]}),!l&&(0,s.jsx)("p",{children:e.errorText})]})}},244:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(555),a=n(43),s=n(99),i=n(579);const o=(e,t)=>{switch(t.type){case"CHANGE":return(0,r.A)((0,r.A)({},e),{},{value:t.val,isValid:(0,s.tf)(t.val,t.validators)});case"TOUCH":return(0,r.A)((0,r.A)({},e),{},{isTouched:!0});default:return e}},l=e=>{const[t,n]=(0,a.useReducer)(o,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:r,onInput:s}=e,{value:l,isValid:c}=t;(0,a.useEffect)((()=>{s(r,l,c)}),[r,l,c,s]);const u=t=>{n({type:"CHANGE",val:t.target.value,validators:e.validators})},d=()=>{n({type:"TOUCH"})},p="input"===e.element?(0,i.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:d,value:t.value}):(0,i.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:d,value:t.value});return(0,i.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,i.jsx)("label",{htmlFor:e.id,children:e.label}),p,!t.isValid&&t.isTouched&&(0,i.jsx)("p",{children:e.errorText})]})}},837:(e,t,n)=>{n.d(t,{A:()=>a});n(43);var r=n(579);const a=e=>(0,r.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},626:(e,t,n)=>{n.d(t,{A:()=>i});n(43);var r=n(630),a=n(347),s=n(579);const i=e=>(0,s.jsx)(r.A,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,s.jsx)(a.A,{onClick:e.onClear,children:"Okay"}),children:(0,s.jsx)("p",{children:e.error})})},630:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(555),a=n(43),s=n(950),i=n(336),o=n(6),l=n(579);const c=e=>{const t=(0,l.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[(0,l.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:(0,l.jsx)("h2",{children:e.header})}),(0,l.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:[(0,l.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),(0,l.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.createPortal(t,document.getElementById("modal-hook"))},u=e=>(0,l.jsxs)(a.Fragment,{children:[e.show&&(0,l.jsx)(o.A,{onClick:e.onCancel}),(0,l.jsx)(i.A,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,l.jsx)(c,(0,r.A)({},e))})]})},596:(e,t,n)=>{n.d(t,{m:()=>i});var r=n(555),a=n(43);const s=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let n=!0;for(const r in e.inputs)e.inputs[r]&&(n=r===t.inputId?n&&t.isValid:n&&e.inputs[r].isValid);return(0,r.A)((0,r.A)({},e),{},{inputs:(0,r.A)((0,r.A)({},e.inputs),{},{[t.inputId]:{value:t.value,isValid:t.isValid}}),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},i=(e,t)=>{const[n,r]=(0,a.useReducer)(s,{inputs:e,isValid:t});return[n,(0,a.useCallback)(((e,t,n)=>{r({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),(0,a.useCallback)(((e,t)=>{r({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},418:(e,t,n)=>{n.d(t,{x:()=>a});var r=n(43);const a=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),s=(0,r.useRef)([]),i=(0,r.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);const o=new AbortController;s.current.push(o);try{const a=await fetch(e,{method:n,body:r,headers:i,signal:o.signal}),l=await a.json();if(s.current=s.current.filter((e=>e!==o)),!a.ok)throw new Error(l.message);return t(!1),l}catch(l){throw a(l.message),t(!1),l}}),[]);return(0,r.useEffect)((()=>()=>{s.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:n,sentRequest:i,clearError:()=>{a(null)}}}},99:(e,t,n)=>{n.d(t,{B_:()=>o,Ik:()=>l,i$:()=>c,tf:()=>u});const r="REQUIRE",a="MINLENGTH",s="MAXLENGTH",i="EMAIL",o=()=>({type:r}),l=e=>({type:a,val:e}),c=()=>({type:i}),u=(e,t)=>{let n=!0;for(const o of t)o.type===r&&(n=n&&e.trim().length>0),o.type===a&&(n=n&&e.trim().length>=o.val),o.type===s&&(n=n&&e.trim().length<=o.val),"MIN"===o.type&&(n=n&&+e>=o.val),"MAX"===o.type&&(n=n&&+e<=o.val),o.type===i&&(n=n&&/^\S+@\S+\.\S+$/.test(e));return n}},220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(555),a=n(43),s=n(626),i=n(863),o=n(837),l=n(347),c=n(244),u=n(596),d=n(356),p=n(99),m=n(181),h=n(418),f=n(579);const v=()=>{const e=(0,a.useContext)(m.c),[t,n]=(0,a.useState)(!0),{isLoading:v,error:y,sentRequest:b,clearError:g}=(0,h.x)(),[j,x,A]=(0,u.m)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.A,{error:y,onClear:g}),(0,f.jsxs)(o.A,{className:"authentication",children:[v&&(0,f.jsx)(i.A,{asOverlay:!0}),(0,f.jsx)("h2",{children:"Login Required"}),(0,f.jsx)("hr",{}),(0,f.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),t)try{const t=await b("http://localhost:5000/api/users/login","POST",JSON.stringify({email:j.inputs.email.value,password:j.inputs.password.value}),{"Content-Type":"application/json"});e.login(t.userId,t.token)}catch(y){}else try{const t=new FormData;t.append("name",j.inputs.name.value),t.append("email",j.inputs.email.value),t.append("password",j.inputs.password.value),t.append("image",j.inputs.image.value);const n=await b("http://localhost:5000/api/users/signup","POST",t);e.login(n.userId,n.token)}catch(y){}},children:[!t&&(0,f.jsx)(c.A,{element:"input",type:"text",id:"name",label:"Your Name",validators:[(0,p.B_)()],errorText:"Please enter a name",onInput:x}),!t&&(0,f.jsx)(d.A,{center:!0,id:"image",onInput:x}),(0,f.jsx)(c.A,{id:"email",element:"input",type:"email",label:"email",validators:[(0,p.i$)()],errorText:"Please enter a valid email",onInput:x}),(0,f.jsx)(c.A,{id:"password",element:"input",type:"password",label:"Password",validators:[(0,p.Ik)(6)],errorText:"Please enter a password",onInput:x}),(0,f.jsx)(l.A,{type:"submit",disabled:!j.isValid,children:t?"Login":"Signup"})]}),(0,f.jsxs)(l.A,{inverse:!0,onClick:()=>{t?A((0,r.A)((0,r.A)({},j.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):A((0,r.A)((0,r.A)({},j.inputs),{},{name:void 0,image:void 0}),j.inputs.email.isValid&&j.inputs.password.isValid),n((e=>!e))},children:["Switch to ",t?"Signup":"Login"]})]})]})}},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{A:()=>o})}}]);
//# sourceMappingURL=220.7ccdafa2.chunk.js.map